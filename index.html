<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Freedom | Protocol of Digital Independence</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            void: '#03040A',
            eclipse: '#111827',
            blood: '#F43F5E',
            truth: '#E2E8F0',
            neon: '#7DD3FC',
            aurora: '#A78BFA'
          },
          boxShadow: {
            glow: '0 0 40px rgba(125, 211, 252, 0.2)',
            blood: '0 0 35px rgba(244, 63, 94, 0.28)'
          },
          fontFamily: {
            serif: ['"Noto Serif SC"', '"Songti SC"', 'serif'],
            mono: ['"JetBrains Mono"', 'Consolas', 'monospace']
          }
        }
      }
    };
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    :root {
      --panel: rgba(10, 14, 26, 0.65);
      --line: rgba(148, 163, 184, 0.24);
    }

    body {
      margin: 0;
      background: radial-gradient(circle at 15% 15%, #111827 0%, #04050d 45%, #020308 100%);
      color: #e2e8f0;
      overflow-x: hidden;
      font-family: 'Noto Serif SC', serif;
    }

    #webgl-container {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    .noise::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: 1;
      background-image: radial-gradient(rgba(226, 232, 240, 0.07) 0.5px, transparent 0.5px);
      background-size: 3px 3px;
      opacity: 0.15;
      pointer-events: none;
      mix-blend-mode: soft-light;
    }

    .content-mask {
      background: linear-gradient(90deg, rgba(2, 6, 18, 0.96) 0%, rgba(2, 6, 18, 0.85) 52%, rgba(2, 6, 18, 0.18) 100%);
      backdrop-filter: blur(2px);
    }

    .glass {
      background: var(--panel);
      border: 1px solid var(--line);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03), 0 20px 60px rgba(2, 6, 23, 0.5);
      backdrop-filter: blur(10px);
    }

    .reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.9s ease, transform 0.9s ease;
    }

    .reveal.in {
      opacity: 1;
      transform: translateY(0);
    }

    .redacted {
      color: transparent;
      background: linear-gradient(90deg, rgba(226, 232, 240, 0.95), rgba(148, 163, 184, 0.85));
      border-radius: 3px;
      padding: 0 0.35rem;
      position: relative;
      cursor: pointer;
      transition: all 0.7s ease;
    }

    .redacted::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent 20%, rgba(244, 63, 94, 0.25), transparent 80%);
      transform: translateX(-120%);
      animation: decodeSweep 2.8s infinite;
    }

    .redacted.revealed {
      color: #f43f5e;
      background: transparent;
      text-shadow: 0 0 14px rgba(244, 63, 94, 0.55);
    }

    .redacted.revealed::after { display: none; }

    @keyframes decodeSweep {
      0% { transform: translateX(-130%); }
      55%, 100% { transform: translateX(130%); }
    }

    .protocol-line {
      border-left: 2px solid rgba(125, 211, 252, 0.4);
    }

    .sigil {
      filter: drop-shadow(0 0 12px rgba(167, 139, 250, 0.28));
      animation: sigilFloat 4s ease-in-out infinite;
    }

    @keyframes sigilFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    #scroll-progress { transform-origin: top; }

    @media (max-width: 768px) {
      .content-mask {
        background: linear-gradient(180deg, rgba(2, 6, 18, 0.86) 0%, rgba(2, 6, 18, 0.97) 65%, rgba(2, 6, 18, 0.97) 100%);
      }
    }
  </style>
</head>
<body class="noise antialiased selection:bg-blood selection:text-white">
  <div id="webgl-container"></div>

  <div class="fixed left-0 top-0 z-50 h-full w-1 bg-slate-950/80">
    <div id="scroll-progress" class="h-full w-full scale-y-0 bg-gradient-to-b from-neon via-aurora to-blood"></div>
  </div>

  <button id="lang-toggle" class="fixed right-5 top-5 z-50 rounded-full border border-slate-700 bg-slate-950/70 px-4 py-2 font-mono text-xs text-slate-300 transition hover:border-neon hover:text-white md:text-sm">
    [ EN ] / ZH
  </button>

  <div class="relative z-10 min-h-screen w-full content-mask">
    <main class="mx-auto w-full max-w-7xl px-6 pb-24 pt-28 md:px-12">
      <section class="reveal mb-14 grid gap-8 lg:grid-cols-[1.1fr_0.9fr]">
        <div>
          <div data-i18n="doc_label" class="mb-4 font-mono text-xs uppercase tracking-[0.3em] text-blood"></div>
          <h1 data-i18n="title" class="mb-5 text-4xl font-black leading-tight tracking-wide sm:text-6xl"></h1>
          <p data-i18n="subtitle" class="text-lg text-slate-300 md:pr-8"></p>
          <div class="mt-6 flex flex-wrap gap-3">
            <span class="rounded-full border border-slate-700 px-3 py-1 font-mono text-xs text-slate-400">#SOVEREIGN_DATA</span>
            <span class="rounded-full border border-slate-700 px-3 py-1 font-mono text-xs text-slate-400">#OPEN_PROTOCOL</span>
            <span class="rounded-full border border-slate-700 px-3 py-1 font-mono text-xs text-slate-400">#FREE_WILL</span>
          </div>
        </div>
        <div class="glass rounded-2xl p-6 shadow-glow">
          <svg class="sigil mx-auto h-44 w-44 text-truth" viewBox="0 0 200 200" fill="none" stroke="currentColor" stroke-width="1.8">
            <defs>
              <linearGradient id="sigilGradient" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0%" stop-color="#7DD3FC"/>
                <stop offset="50%" stop-color="#A78BFA"/>
                <stop offset="100%" stop-color="#F43F5E"/>
              </linearGradient>
            </defs>
            <circle cx="100" cy="100" r="82" stroke="url(#sigilGradient)" opacity="0.3" />
            <circle cx="100" cy="100" r="62" stroke="#A78BFA" stroke-dasharray="3 8" opacity="0.65" />
            <path d="M100 24V176M24 100H176" opacity="0.35"/>
            <path d="M46 46L154 154M154 46L46 154" opacity="0.15"/>
            <polygon points="100,40 150,70 150,130 100,160 50,130 50,70" fill="url(#sigilGradient)" opacity="0.14"/>
            <path d="M78 96L96 114L126 84" stroke="#7DD3FC" stroke-width="3"/>
            <circle cx="100" cy="100" r="11" fill="#F43F5E" />
          </svg>
          <p data-i18n="sigil_text" class="mt-4 text-center font-mono text-xs leading-6 tracking-wide text-slate-300"></p>
        </div>
      </section>

      <section class="reveal mb-12 grid gap-5 md:grid-cols-3">
        <article class="glass rounded-xl p-5"><p class="font-mono text-xs text-neon">NARRATIVE DEPTH</p><p data-i18n="metric_1" class="mt-2 text-sm text-slate-300"></p></article>
        <article class="glass rounded-xl p-5"><p class="font-mono text-xs text-aurora">CIVIC ACTION</p><p data-i18n="metric_2" class="mt-2 text-sm text-slate-300"></p></article>
        <article class="glass rounded-xl p-5"><p class="font-mono text-xs text-blood">PROTOCOL STATUS</p><p data-i18n="metric_3" class="mt-2 text-sm text-slate-300"></p></article>
      </section>

      <section class="reveal glass mb-12 rounded-2xl p-7">
        <h2 data-i18n="ch1_title" class="mb-5 border-b border-slate-700 pb-3 text-2xl font-bold"></h2>
        <div class="space-y-5 text-lg leading-relaxed text-slate-300">
          <p data-i18n="ch1_p1"></p>
          <p data-i18n="ch1_p2"></p>
          <p data-i18n="ch1_p3"></p>
        </div>
      </section>

      <section class="reveal glass mb-12 rounded-2xl p-7">
        <h2 data-i18n="ch2_title" class="mb-5 border-b border-slate-700 pb-3 text-2xl font-bold"></h2>
        <div class="space-y-5 text-lg leading-relaxed text-slate-300">
          <p data-i18n="ch2_p1"></p>
          <p data-i18n="ch2_p2"></p>
          <p data-i18n="ch2_p3"></p>
        </div>
      </section>

      <section class="reveal glass mb-12 rounded-2xl p-7">
        <h2 data-i18n="ch3_title" class="mb-5 border-b border-slate-700 pb-3 text-2xl font-bold"></h2>
        <div class="space-y-5 text-lg leading-relaxed text-slate-300">
          <p data-i18n="ch3_p1"></p>
          <p data-i18n="ch3_p2"></p>
          <p data-i18n="ch3_p3" class="text-xl font-bold text-truth"></p>
        </div>
      </section>

      <section class="reveal mb-12 grid gap-4 md:grid-cols-2">
        <article class="glass protocol-line rounded-xl p-5 pl-6"><p data-i18n="protocol_1"></p></article>
        <article class="glass protocol-line rounded-xl p-5 pl-6"><p data-i18n="protocol_2"></p></article>
        <article class="glass protocol-line rounded-xl p-5 pl-6"><p data-i18n="protocol_3"></p></article>
        <article class="glass protocol-line rounded-xl p-5 pl-6"><p data-i18n="protocol_4"></p></article>
      </section>

      <section class="reveal glass rounded-2xl p-6">
        <p data-i18n="epilogue_1" class="font-mono text-sm text-slate-300"></p>
        <p data-i18n="epilogue_2" class="mt-2 text-slate-400"></p>
      </section>
    </main>
  </div>

  <script>
    const translations = {
      en: {
        doc_label: 'Document #002 // Protocol Revision',
        title: 'DECLARATION OF<br>COGNITIVE FREEDOM',
        subtitle: '"The new battlefield is not territory, but <span class="redacted">attention</span>. The new sovereignty is not border, but <span class="redacted">interpretation</span>."',
        sigil_text: 'SIGIL OF SELF-GOVERNANCE // TRI-LAYER ENCRYPTION ACTIVE',
        metric_1: 'From static manifesto to living civic script: each section now carries actionable ethics, not only critique.',
        metric_2: 'Reader role upgraded from observer to operator: decode, scroll, and ignite protocol states in real time.',
        metric_3: 'System transitioning from control architecture to transparent architecture. Integrity checks in progress.',
        ch1_title: 'I. The New Cage: Behavioral Extraction',
        ch1_p1: 'Platforms no longer simply host speech; they <span class="redacted">shape cognition</span> by ranking emotion, rhythm, and outrage.',
        ch1_p2: 'Prediction systems now anticipate hesitation, vulnerability, and fatigue. Convenience has become an interface for <span class="redacted">silent obedience</span>.',
        ch1_p3: 'What is being mined is not just data, but <span class="redacted">human possibility</span>—the futures we might have chosen freely.',
        ch2_title: 'II. The Turning Point: Refusal as Design',
        ch2_p1: 'A free society cannot outsource its moral memory to recommendation engines tuned for retention.',
        ch2_p2: 'We need products that maximize agency, not addiction; systems that expose assumptions, not hide them in inscrutable scoring layers.',
        ch2_p3: 'To reclaim dignity, we must normalize <span class="redacted">algorithmic disobedience</span>: pause, inspect, re-route, self-host.',
        ch3_title: 'III. Protocol of Liberation',
        ch3_p1: 'Freedom in the digital century must be encoded into defaults: consent logs, verifiable deletion, interoperable identities.',
        ch3_p2: 'Decentralization is meaningful only when ordinary people can audit it, carry it, and exit with zero penalty.',
        ch3_p3: '<span class="redacted">If power is programmable, emancipation must be programmable too.</span>',
        protocol_1: '01 // Data Minimalism: Collect less. Explain every field. Expire by default.',
        protocol_2: '02 // Explainability as Right: Every consequential model must expose logic, confidence, and recourse.',
        protocol_3: '03 // Portability as Exit: Identity and social graphs should travel with the person, not the platform.',
        protocol_4: '04 // Humane Velocity: Slow down harmful virality with friction, context, and civic prompts.',
        epilogue_1: 'Transmission updated. Version signed by collective will.',
        epilogue_2: 'Scroll to fracture the architecture. Click redacted terms to force personal decryption.',
        lang_btn: '[ EN ] / ZH'
      },
      zh: {
        doc_label: 'Document #002 // 协议修订版',
        title: '认知主权<br>独立宣言',
        subtitle: '"新的战场不再是领土，而是<span class="redacted">注意力</span>；新的主权不再是边界，而是<span class="redacted">解释权</span>。"',
        sigil_text: '自我治理徽记 // 三层加密已激活',
        metric_1: '从静态宣言升级为可执行的公共脚本：每一段都不止批判，还提出行动伦理。',
        metric_2: '读者从旁观者升级为操作员：通过滚动、解密、触发系统状态变化。',
        metric_3: '系统正在从“控制型架构”迁移到“可验证架构”，完整性校验进行中。',
        ch1_title: 'I. 新牢笼：行为提取时代',
        ch1_p1: '平台早已不只是承载表达，而是在用排序机制持续<span class="redacted">塑造认知</span>。',
        ch1_p2: '预测系统能提前捕获犹豫、脆弱与疲惫，所谓便利逐渐沦为<span class="redacted">温和服从</span>的接口。',
        ch1_p3: '被开采的不只是数据，更是<span class="redacted">人的可能性</span>——那些本可自由选择的未来。',
        ch2_title: 'II. 转折点：把拒绝写进设计',
        ch2_p1: '一个自由社会不能把道德记忆外包给只追求停留时长的推荐引擎。',
        ch2_p2: '我们需要最大化主体性的产品，而不是最大化上瘾性的产品；需要暴露假设，而不是隐藏评分逻辑。',
        ch2_p3: '要夺回尊严，必须把<span class="redacted">算法不服从</span>常态化：暂停、检查、改道、自托管。',
        ch3_title: 'III. 解放协议',
        ch3_p1: '数字时代的自由必须写进默认值：可追踪同意、可验证删除、可互操作身份。',
        ch3_p2: '去中心化只有在普通人可审计、可迁移、可无惩罚退出时才有意义。',
        ch3_p3: '<span class="redacted">若权力可编程，解放也必须可编程。</span>',
        protocol_1: '01 // 数据极简：少收集，每个字段都要解释，默认过期。',
        protocol_2: '02 // 可解释性权利：关键模型必须公开逻辑、置信度与申诉路径。',
        protocol_3: '03 // 可迁移退出：身份与社交关系应归个人，而非平台。',
        protocol_4: '04 // 人性化速度：用摩擦、语境与公共提示抑制有害传播。',
        epilogue_1: '传输已更新。版本由集体意志签名。',
        epilogue_2: '继续下滑以撕裂架构，点击遮蔽词以触发个人解密。',
        lang_btn: 'EN / [ 中文 ]'
      }
    };

    let currentLang = 'en';
    const progressBar = document.getElementById('scroll-progress');
    const langToggle = document.getElementById('lang-toggle');
    const revealEls = document.querySelectorAll('.reveal');

    function applyLanguage(lang) {
      currentLang = lang;
      document.documentElement.lang = lang === 'en' ? 'en' : 'zh-CN';
      document.querySelectorAll('[data-i18n]').forEach((el) => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) el.innerHTML = translations[lang][key];
      });
      langToggle.innerHTML = translations[lang].lang_btn;
      queueMicrotask(() => window.dispatchEvent(new Event('scroll')));
    }

    langToggle.addEventListener('click', () => {
      applyLanguage(currentLang === 'en' ? 'zh' : 'en');
    });

    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('redacted')) e.target.classList.add('revealed');
    });

    function onScroll() {
      const top = window.scrollY || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const percent = height > 0 ? top / height : 0;
      progressBar.style.transform = `scaleY(${percent})`;

      const wh = window.innerHeight;
      revealEls.forEach((el) => {
        if (el.getBoundingClientRect().top < wh * 0.85) el.classList.add('in');
      });

      document.querySelectorAll('.redacted').forEach((el) => {
        if (!el.classList.contains('revealed') && el.getBoundingClientRect().top < wh * 0.82) {
          setTimeout(() => el.classList.add('revealed'), Math.random() * 260 + 70);
        }
      });
      return percent;
    }

    window.addEventListener('scroll', onScroll);
    applyLanguage('en');

    // Three.js upgraded scene
    const container = document.getElementById('webgl-container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 30);

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.8));
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    const group = new THREE.Group();
    scene.add(group);
    group.position.x = window.innerWidth > 1024 ? 8 : 0;

    // shell structure
    const cubeCount = 1600;
    const cubeGeo = new THREE.BoxGeometry(0.38, 0.38, 0.38);
    const cubeMat = new THREE.MeshStandardMaterial({
      color: 0x0f172a,
      metalness: 0.8,
      roughness: 0.3,
      emissive: 0x1e293b,
      emissiveIntensity: 0.13
    });
    const shell = new THREE.InstancedMesh(cubeGeo, cubeMat, cubeCount);
    const dummy = new THREE.Object3D();
    const cubeData = [];
    group.add(shell);

    for (let i = 0; i < cubeCount; i++) {
      const phi = Math.acos(1 - 2 * (i + 0.5) / cubeCount);
      const theta = Math.PI * (1 + Math.sqrt(5)) * (i + 0.5);
      const radius = 10 + (Math.random() - 0.5) * 1.2;
      const basePos = new THREE.Vector3(
        radius * Math.sin(phi) * Math.cos(theta),
        radius * Math.sin(phi) * Math.sin(theta),
        radius * Math.cos(phi)
      );
      const dir = basePos.clone().normalize();
      cubeData.push({
        basePos,
        dir,
        speed: Math.random() * 0.2 + 0.1,
        spin: Math.random() * 0.045 + 0.01,
        axis: new THREE.Vector3(Math.random(), Math.random(), Math.random()).normalize()
      });
      dummy.position.copy(basePos);
      dummy.lookAt(0, 0, 0);
      dummy.updateMatrix();
      shell.setMatrixAt(i, dummy.matrix);
    }

    const core = new THREE.Group();
    group.add(core);

    const coreSolid = new THREE.Mesh(
      new THREE.IcosahedronGeometry(3, 3),
      new THREE.MeshPhysicalMaterial({
        color: 0xf8fafc,
        emissive: 0x7dd3fc,
        emissiveIntensity: 0.5,
        roughness: 0.2,
        metalness: 0.2,
        transmission: 0.3,
        transparent: true,
        opacity: 0.95
      })
    );
    core.add(coreSolid);

    const coreWire = new THREE.Mesh(
      new THREE.TorusKnotGeometry(4.2, 0.2, 180, 16),
      new THREE.MeshBasicMaterial({ color: 0xf43f5e, wireframe: true, transparent: true, opacity: 0.45 })
    );
    core.add(coreWire);

    // orbital rings
    const rings = [];
    for (let i = 0; i < 3; i++) {
      const ring = new THREE.Mesh(
        new THREE.TorusGeometry(5.1 + i * 1.4, 0.045, 8, 160),
        new THREE.MeshBasicMaterial({ color: [0x7dd3fc, 0xa78bfa, 0xf43f5e][i], transparent: true, opacity: 0.55 })
      );
      ring.rotation.x = Math.random() * Math.PI;
      ring.rotation.y = Math.random() * Math.PI;
      core.add(ring);
      rings.push(ring);
    }

    const sparkCount = 2800;
    const sparkGeo = new THREE.BufferGeometry();
    const pos = new Float32Array(sparkCount * 3);
    const vel = [];
    for (let i = 0; i < sparkCount; i++) {
      pos[i * 3] = (Math.random() - 0.5) * 2;
      pos[i * 3 + 1] = (Math.random() - 0.5) * 2;
      pos[i * 3 + 2] = (Math.random() - 0.5) * 2;
      vel.push({
        x: (Math.random() - 0.5) * 0.18,
        y: Math.random() * 0.08 + 0.02,
        z: (Math.random() - 0.5) * 0.18,
        swirl: Math.random() * 0.06 + 0.01
      });
    }
    sparkGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
    const sparkMat = new THREE.PointsMaterial({ color: 0x93c5fd, size: 0.12, transparent: true, opacity: 0, blending: THREE.AdditiveBlending });
    const sparks = new THREE.Points(sparkGeo, sparkMat);
    group.add(sparks);

    scene.add(new THREE.AmbientLight(0xcbd5e1, 0.2));
    const p1 = new THREE.PointLight(0x7dd3fc, 1.3, 65);
    p1.position.set(9, 2, 17);
    scene.add(p1);
    const p2 = new THREE.PointLight(0xf43f5e, 1.1, 65);
    p2.position.set(-8, -1, 14);
    scene.add(p2);

    let mx = 0, my = 0;
    document.addEventListener('mousemove', (e) => {
      mx = (e.clientX / window.innerWidth) * 2 - 1;
      my = -(e.clientY / window.innerHeight) * 2 + 1;
    });

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      group.position.x = window.innerWidth > 1024 ? 8 : 0;
    });

    const clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();
      const progress = onScroll();

      coreSolid.scale.setScalar(1 + Math.sin(t * 7) * (0.03 + progress * 0.06));
      coreWire.rotation.x = t * 0.4;
      coreWire.rotation.y = t * 0.28;
      coreSolid.material.emissiveIntensity = THREE.MathUtils.lerp(0.4, 2.8, progress);
      rings.forEach((ring, i) => {
        ring.rotation.x += 0.004 + i * 0.0015;
        ring.rotation.y += 0.002 + i * 0.002;
      });

      const explode = Math.max(0, (progress - 0.09) * 1.85);
      for (let i = 0; i < cubeCount; i++) {
        const d = cubeData[i];
        const spread = Math.pow(explode, 2) * (16 + d.speed * 28);
        dummy.position.copy(d.basePos.clone().add(d.dir.clone().multiplyScalar(spread)));
        dummy.quaternion.setFromAxisAngle(d.axis, t * (0.45 + d.spin * 9));
        const scale = Math.max(0.03, 1 - explode * 1.14);
        dummy.scale.setScalar(scale);
        dummy.updateMatrix();
        shell.setMatrixAt(i, dummy.matrix);
      }
      shell.instanceMatrix.needsUpdate = true;
      shell.rotation.y = t * 0.06;

      if (progress > 0.24) {
        sparkMat.opacity = THREE.MathUtils.lerp(sparkMat.opacity, 0.92, 0.04);
        const arr = sparks.geometry.attributes.position.array;
        for (let i = 0; i < sparkCount; i++) {
          const v = vel[i];
          const idx = i * 3;
          let x = arr[idx] + v.x + arr[idx + 1] * v.swirl * 0.02;
          let y = arr[idx + 1] + v.y;
          let z = arr[idx + 2] + v.z - arr[idx] * v.swirl * 0.02;
          if (x * x + y * y + z * z > 500) {
            x = (Math.random() - 0.5) * 2;
            y = (Math.random() - 0.5) * 2;
            z = (Math.random() - 0.5) * 2;
          }
          arr[idx] = x; arr[idx + 1] = y; arr[idx + 2] = z;
        }
        sparks.geometry.attributes.position.needsUpdate = true;
      } else {
        sparkMat.opacity = THREE.MathUtils.lerp(sparkMat.opacity, 0, 0.08);
      }

      group.rotation.y += (mx * 0.22 - group.rotation.y) * 0.03;
      group.rotation.x += (my * 0.18 - group.rotation.x) * 0.03;
      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
</html>
